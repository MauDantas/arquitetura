if (self.CavalryLogger) { CavalryLogger.start_js(["wrKdM"]); }

__d("NavigationMetricsEnumJS",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={NAVIGATION_START:"navigationStart",UNLOAD_EVENT_START:"unloadEventStart",UNLOAD_EVENT_END:"unloadEventEnd",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",CONNECT_END:"connectEnd",SECURE_CONNECTION_START:"secureConnectionStart",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd",DOM_LOADING:"domLoading",DOM_INTERACTIVE:"domInteractive",DOM_CONTENT_LOADED_EVENT_START:"domContentLoadedEventStart",DOM_CONTENT_LOADED_EVENT_END:"domContentLoadedEventEnd",DOM_COMPLETE:"domComplete",LOAD_EVENT_START:"loadEventStart",LOAD_EVENT_END:"loadEventEnd"};}),null);
__d("ResourceTimingMetricsEnumJS",[],(function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={START_TIME:"startTime",REDIRECT_START:"redirectStart",REDIRECT_END:"redirectEnd",FETCH_START:"fetchStart",DOMAIN_LOOKUP_START:"domainLookupStart",DOMAIN_LOOKUP_END:"domainLookupEnd",CONNECT_START:"connectStart",SECURE_CONNECTION_START:"secureConnectionStart",CONNECT_END:"connectEnd",REQUEST_START:"requestStart",RESPONSE_START:"responseStart",RESPONSE_END:"responseEnd"};}),null);
__d('ImageTimingHelper',['Arbiter','BigPipe','URI'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={};c('Arbiter').subscribe(c('BigPipe').Events.init,function(j,k){if(k.lid&&k.lid!=='0')k.arbiter.subscribe('images_displayed',function(l,m){var n=h[m.lid];if(!n)n=h[m.lid]=[];m.images.forEach(function(o){try{var q=new (c('URI'))(o);o=q.setFragment('').toString();}catch(p){return;}if(i[o])return;i[o]=true;n.push({pagelet:m.pagelet,timeslice:m.timeslice,ts:m.ts,uri:o});});});});f.exports.getImageTimings=function(j){return h[j]||[];};}),null);
__d('PageletEventsHelper',['Arbiter','PageletEventConstsJS'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h='BigPipe/init',i='pagelet_event',j='phase_begin',k={},l=false;function m(){return {pagelets:{},categories:{},phase_start:{},display_resources:{},all_resources:{}};}function n(q,r,s,t){if(k[t].pagelets[r]==undefined)k[t].pagelets[r]={};k[t].pagelets[r][q]=s;}function o(q){q.subscribe(i,function(r,s){var event=s.event,t=s.ts,u=s.id,v=s.lid,w=s.phase,x=s.categories,y=s.allResources,z=s.displayResources;n(event,u,t,v);var aa=k[v],ba=aa.pagelets[u];if(event===c('PageletEventConstsJS').ARRIVE_END){ba.phase=w;aa.all_resources[u]=y;aa.display_resources[u]=z;}if((event===c('PageletEventConstsJS').ONLOAD_END||event===c('PageletEventConstsJS').DISPLAY_END)&&x)x.forEach(function(ca){if(aa.categories[ca]==undefined)aa.categories[ca]={};aa.categories[ca][event]=t;});});q.subscribe(j,function(event,r){k[r.lid].phase_start[r.phase]=r.ts;});}var p={init:function(){if(l)return;c('Arbiter').subscribe(h,function(event,q){var r=q.lid,s=q.arbiter;k[r]=m();o(s);});l=true;},getMetrics:function(q){if(k[q])return JSON.parse(JSON.stringify(k[q]));return null;}};f.exports=p;}),null);
__d('NavigationTimingHelper',['NavigationMetricsEnumJS','forEachObject','performance'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(j,k){var l={};c('forEachObject')(c('NavigationMetricsEnumJS'),function(m){var n=k[m];if(n)l[m]=n+j;});return l;}var i={getAsyncRequestTimings:function(j){if(!j||!c('performance').timing||!c('performance').getEntriesByName)return undefined;var k=c('performance').getEntriesByName(j);if(k.length===0)return undefined;return h(c('performance').timing.navigationStart,k[0]);},getNavTimings:function(){if(!c('performance').timing)return undefined;return h(0,c('performance').timing);}};f.exports=i;}),null);
__d('PerfXFlusher',['invariant','Banzai'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='perfx_custom_logger_endpoint',j=['perfx_page','perfx_page_type','lid'];function k(m){j.forEach(function(n){return h(n in m);});}var l={flush:function(m){k(m);c('Banzai').post(i,m,{signal:true});},registerToSendWithBeacon:function(m){c('Banzai').registerToSendWithBeacon(i,m);}};f.exports=l;}),null);
__d("pageLoadedViaSWCache",[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(){return self.__SW_CACHE__===1;}f.exports=h;}),null);
__d('PerfXLogger',['DataAttributeUtils','PerfXFlusher','NavigationMetrics','NavigationTimingHelper','Set','forEachObject','performanceAbsoluteNow','setTimeoutAcrossTransitions','pageLoadedViaSWCache'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={},j=65*1000,k=['e2e','tti','all_pagelets_displayed','all_pagelets_loaded'],l={},m={_listenersSetUp:false,_setupListeners:function(){if(this._listenersSetUp)return;this._subscribeToNavigationMetrics();c('PerfXFlusher').registerToSendWithBeacon(function(){var n=[];c('forEachObject')(h,function(o,p){if(!h[p].sent){var q=this.getPayload(p,'unload fired');if(q!=null)n.push(q);}}.bind(this));h={};return n;}.bind(this));this._listenersSetUp=true;},_init:function(n){var o=n.lid;if(o==null)return;var p=i[o];delete i[o];h[o]=babelHelpers['extends']({tags:new (c('Set'))(p||[]),sent:false},n);this._registerTimeoutSendback(o);this._setupListeners();},initWithNavigationMetricsLID:function(n,o){var p=c('NavigationMetrics').getFullPageLoadLid();if(!p)return;this._init(babelHelpers['extends']({},o,{lid:p}));if(n&&n.always)for(var q=0;q<n.always.length;q++)m.addTag(p,n.always[q]);if(n&&n.swCache&&c('pageLoadedViaSWCache')())for(var r=0;r<n.swCache.length;r++)m.addTag(p,n.swCache[r]);},init:function(n,o){if(o!=null&&n.lid!=null)l[n.lid]=o;this._init(n);},addTag:function(n,o){var p=h[n];if(p){p.tags.add(o);return;}if(!i[n])i[n]=[];i[n].push(o);},addTagWithNavigationMetricsLID:function(n){var o=c('NavigationMetrics').getFullPageLoadLid();if(!o)return;m.addTag(o,n);},_registerTimeoutSendback:function(n){var o=this._getFetchStart(n),p=j;if(o!=null)p-=c('performanceAbsoluteNow')()-o;c('setTimeoutAcrossTransitions')(function(){return this._uploadPayload(n,'sendback time out');}.bind(this),p);},_subscribeToNavigationMetrics:function(){c('NavigationMetrics').addRetroactiveListener(c('NavigationMetrics').Events.EVENT_OCCURRED,function(n,o){if(!(n in h))return;h[n][o.event]=o.timestamp;});c('NavigationMetrics').addRetroactiveListener(c('NavigationMetrics').Events.NAVIGATION_DONE,function(n,o){var p=o.serverLID;if(!(p in h))return;h[p].tti=o.tti;h[p].e2e=o.e2e;h[p].all_pagelets_displayed=o.all_pagelets_displayed;h[p].all_pagelets_loaded=o.all_pagelets_loaded;if(this._validateValues(p))this._uploadPayload(p);}.bind(this));},_getPayloadWithOffset:function(n,o,p){var q=h[n];if(q==null)return null;var r=Object.assign({},q),s=document.querySelector('[id^="hyperfeed_story_id"]');if(s){var t=JSON.parse(c('DataAttributeUtils').getDataFt(s));if(t)r.mf_query_id=t.qid;}r.tags=Array.from(q.tags);this._adjustValues(r,o);r.fetch_start=o;if(r.perfx_page_type==='normal'){var u=c('NavigationTimingHelper').getNavTimings();if(u!=null&&u.navigationStart!=null)r.nav_to_fetch=u.navigationStart;}if(p!=null)r.sendback_reason=p;delete r.sent;return r;},_uploadPayload:function(n,o){if(h[n]!=null&&!h[n].sent){var p=this.getPayload(n,o);if(p!=null){c('PerfXFlusher').flush(p);h[n].sent=true;}}},getPayload:function(n,o){return this._getPayloadWithOffset(n,this._getFetchStart(n),o);},_getFetchStart:function(n){if(!(n in h))return null;var o=void 0,p=h[n].perfx_page_type;if(p=='quickling'){if(!(n in l)){return null;}else o=c('NavigationTimingHelper').getAsyncRequestTimings(l[n]);}else o=c('NavigationTimingHelper').getNavTimings();if(!o||!o.fetchStart)return null;return o.fetchStart;},_adjustValues:function(n,o){for(var p=0;p<k.length;p++){var q=k[p],r=n[q];n[q]=r-o;}},_validateValues:function(n){if(!(n in h))return false;var o=h[n];for(var p=0;p<k.length;p++){var q=k[p];if(!o[q])return false;}return true;}};f.exports=m;}),null);
__d('ReactSpeedHelper',['LogBuffer','ReactDOM'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={enableRenderMeasurements:function(){if(!c('ReactDOM').enableRenderMeasurements)return;c('ReactDOM').enableRenderMeasurements();},getMetrics:function(i,j){return c('LogBuffer').read('react_speed').filter(function(k){return ((i==null||k.begin>=i)&&(j==null||k.end<=j));});}};f.exports=h;}),null);
__d('sourceMetaToString',[],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){var k;if(i.name){k=i.name;if(i.module)k=i.module+'.'+k;}else if(i.module)k=i.module+'.<anonymous>';if(j&&i.line){k=(k?k:'<anonymous>')+':'+i.line;if(i.column)k+=':'+i.column;}return k;}f.exports=h;}),null);
__d('ResourceTimingBootloaderHelper',['Bootloader','ResourceTimingMetricsEnumJS','ImageTimingHelper','URI','forEachObject','isEmpty','performance'],(function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={},i={};function j(p,q,r,s){if(!c('performance').timing||!c('performance').getEntriesByType)return;var t={};if(s)t=c('ImageTimingHelper').getImageTimings(r).sort(function(ka,la){return ka.ts-la.ts;}).reduce(function(ka,la){if(ka[la.uri])return ka;ka[la.uri]=la.pagelet;return ka;},{});var u=c('performance').getEntriesByType('resource'),v=0,w=0,x=0;for(var y=0;y<u.length;y++){var z=u[y];if(z.duration<=0||z.startTime<q)continue;var aa='',ba='',ca='',da='',ea='',fa=z.initiatorType;switch(fa){case 'css':case 'link':case 'script':var ga=n(z.name);ba=ga[0];aa=ga[1];if(!ba||!aa)continue;if(aa==='css'||aa==='js'){da=aa;var ha=i[z.name]||w++;ca=ha+'_'+ba;}else{var ia=m(z.name);ea=ia[0];da=ia[1];ca=v+++'_'+ea;}break;case 'img':ca=v+++'_'+k(z.name);da='img';break;case 'iframe':ca=x+++'_'+k(z.name)+l(z.name);da='iframe';break;default:continue;}if(p[z.name]==undefined)p[z.name]=[];var ja={};c('forEachObject')(c('ResourceTimingMetricsEnumJS'),function(ka){var la=z[ka];if(la)ja[ka]=la+c('performance').timing.navigationStart;});ja.type=da;ja.desc=ca;if(da=='img'&&t.hasOwnProperty(z.name))ja.pagelet=t[z.name];ja.transferSize=z.transferSize;ja.encodedBodySize=z.encodedBodySize;p[z.name].push(ja);}}function k(p){var q=new (c('URI'))(p).getDomain();return q;}function l(p){var q=new (c('URI'))(p).getPath();return q;}function m(p){return [k(p),'img'];}function n(p){var q=p.match(/\/rsrc\.php\/.*\/([^\?]+)/);if(!q)return [];var r=q[1],s='',t=r.match(/\.(\w+)$/);if(t)s=t[1];return [r,s];}var o={addBootloaderMetricsToResourceTimings:function(){var p=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],q=arguments.length<=1||arguments[1]===undefined?{}:arguments[1],r=arguments.length<=2||arguments[2]===undefined?true:arguments[2];if(c('isEmpty')(i))i=c('Bootloader').getURLToHashMap();var s={};c('forEachObject')(i,function(v,w){s[v]=w;});var t={bootload:true,js_exec:true,start_bootload:true,tag_bootload:true},u=[];c('forEachObject')(q,function(v,w){var x=w.indexOf('/');if(x===-1)return;var y=w.substring(0,x);if(!t[y])return;u.push(w);var z=w.substring(x+1),aa=s[z];if(!aa)return;if(aa.startsWith('data:'))aa='inlined resource: '+z;if(p[aa]==null)p[aa]=[{}];p[aa].forEach(function(ba){ba.bootloader_hash=z;ba[y]=v;});});if(!r)u.forEach(function(v){return delete q[v];});return p;},getLastTTIAndE2EImageResponseEnds:function(p,q,r){var s={TTI:p,E2E:q};if(!c('performance').timing)return s;var t=r.filter(function(w){return w.ts<=p;}).map(function(w){return w.uri;}).reduce(function(w,x){w[x]=true;return w;},{}),u=r.map(function(w){return w.uri;}).reduce(function(w,x){w[x]=true;return w;},{});for(var v in h)h[v].forEach(function(w){if(w.type==='img'){if(t[v])s.TTI=Math.max(s.TTI,w.responseEnd);if(u[v])s.E2E=Math.max(s.E2E,w.responseEnd);}});return s;},getMetrics:function(p,q,r){h={};if(c('isEmpty')(i))i=c('Bootloader').getURLToHashMap();j(h,p,q,r);return h;}};f.exports=o;}),null);
__d('TimeSliceHelper',['invariant','ArtilleryExperiments','LogBuffer','Map','ReactSpeedHelper','sourceMetaToString'],(function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function(k,l){return Math.round((k-l)*1000);},j={formatMetricsForTransport:function(k){var l=[],m=new (c('Map'))(),n=0,o=k==null?[]:k.map(function(p,q,r){var s=i(p.begin,n),t=i(p.end,p.begin);n=p.end;var u=void 0;if(m.has(p.name)){u=m.get(p.name);!(u!=null)?h(0):void 0;}else{u=l.length;m.set(p.name,u);l.push(p.name);}var v=[s,t,u];if(p.id)v.push(p.id);if(p.parentID)v.push(p.parentID);return v;});return {version:'compact',items:o,names:l};},getMetrics:function(k,l,m,n){var o=c('LogBuffer').read('time_slice'),p=c('LogBuffer').read('time_slice_heartbeat'),q=c('ReactSpeedHelper').getMetrics().map(function(w){return babelHelpers['extends']({},w,{desc:'React['+w.name+']'});}),r=o.concat(p,q),s,t=[],u=function(w){var x;if(w.guard){var y=c('sourceMetaToString')(w),z=w.guard.toString();x=y?z+' at '+y:z;}else if(w.desc){x=w.desc;}else x='JS['+w.count+']';if(c('ArtilleryExperiments').artillery_timeslice_edges){t.push({begin:w.begin,end:w.end,name:x,id:w.id,parentID:w.parentID});}else t.push({begin:w.begin,end:w.end,name:x});},v=function(){if(s)u(s.count==1?s.first:s);s=null;};r.sort(function(w,x){if(w.begin!==x.begin){return w.begin-x.begin;}else if(w.end!==x.end){return w.end-x.end;}else return 0;}).forEach(function(w){if(k&&w.end<k||l&&w.begin>l)return;if(w.end-w.begin<m){if(s&&w.begin-s.end<n){s.end=w.end;s.count++;}else{v();s={begin:w.begin,end:w.end,count:1,first:w,guard:false,id:undefined,parentID:undefined};}}else{v();u(w);}});v();return t;}};f.exports=j;}),null);